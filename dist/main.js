(()=>{"use strict";const e=function(){let e=[];class t{constructor(e){this.title=e,this.todo=[]}}return{createProjects:function(o){const d=new t(o);e.push(d),localStorage.setItem("project",JSON.stringify(e))},updateProjects:function(t,o){for(let d of e)if(t===d.title){d.title=o;break}},removeProjects:function(){},projectList:e}}(),t=function(){class t{constructor(e,t,o,d,n){this.title=e,this.description=t,this.priority=o,this.schedule=d,this.done=!1,this.projectTitle=n}}return{addTodo:function o(d,n,c,l,a){const i=new t(d,n,c,l,a);let r=0;for(let t of e.projectList){if(t.title===a)break;r++}return e.projectList[r].todo.push(i),o},updateTodo:function(t,o,d,n,c,l,a){for(let i of e.projectList)if(l.projectTitle===i.title){console.log("GONE HERE");let e=i.todo;console.log(e),e[a].title=t,e[a].desccription=o,e[a].priority=d,e[a].schedule=n,e[a].projectTitle=c;break}},changeProjectsTodo:function(t){for(let o of e.projectList)if(t===o.title){console.log("Gone through here");for(let e=0;e<o.todo.length;e++)o.todo[e].projectTitle=t,console.log("HERE: "+o.todo[e])}},removeTodo:function(){}}}();!function(){const o=document.querySelector(".add-todo-btn"),d=document.querySelector(".category-name"),n=document.querySelectorAll(".sidebar"),c=document.querySelector("[data-modal-target]"),l=document.querySelectorAll("[data-close-button]"),a=document.getElementById("overlay"),i=document.getElementById("project-content-list");let r=document.querySelectorAll(".project-name");const s=document.getElementById("project-form"),u=document.querySelector(".add-project-button"),p=document.querySelector(".add-task-button"),m=document.getElementById("todo-form"),f=document.getElementById("update-project-modal"),E=document.querySelector(".update-project-button"),h=document.querySelector(".update-task-button"),g=document.getElementById("update-todo-form");let y,L,j="";const C=document.querySelector(".tasks-list");function v(){const t=e.projectList.length;i.replaceChildren();for(let o=0;o<t;o++){const t=document.createElement("a"),d=document.createElement("li"),n=document.createElement("span"),c=document.createElement("btn"),l=document.createElement("btn"),a=e.projectList[o].title,r=document.createElement("div");c.id="edit-project-"+a,l.id="delete-project-"+a,n.textContent=a,c.innerHTML='<i class="fa-regular fa-pen-to-square"></i>',l.innerHTML='<i class="fa-solid fa-trash"></i>',c.classList.add("edit-project"),l.classList.add("delete-project"),d.id="proj-"+a,n.classList.add("project-name"),t.appendChild(n),t.href="#",t.classList.add("project-link"),d.appendChild(t),r.classList.add("edit-delete"),r.appendChild(c),r.appendChild(l),d.appendChild(r),d.classList.add("projects-sidebar"),i.appendChild(d)}}function T(e){null!=e&&(e.classList.add("active"),a.classList.add("active"))}function I(e){null!=e&&(e.classList.remove("active"),a.classList.remove("active"),s.reset(),m.reset(),g.reset(),r=document.querySelectorAll(".project-name"))}function q(t){const o=document.querySelector(".tasks-list");o.innerHTML="";for(let d of e.projectList)if(d.title===t&&d.todo.length>0){const e=d.todo;o.replaceChildren();for(let t=0;t<e.length;t++){const d=document.createElement("div");d.classList.add("todo-container");const n=document.createElement("input");n.type="checkbox",n.classList.add("done-todo-check"),n.id="done-"+e[t].title+"-"+e[t].projectTitle,d.appendChild(n);const c=document.createElement("p");c.classList.add("todo-title");const l=document.createElement("div");l.classList.add("todo-sub-container");const a=document.createElement("button");a.classList.add("todo-details"),a.id="detail-"+e[t].title+"-"+e[t].projectTitle;const i=document.createElement("p"),r=document.createElement("btn");r.id="edit-"+e[t].title+"-"+e[t].projectTitle;const s=document.createElement("btn");s.id="delete-"+e[t].title+"-"+e[t].projectTitle,c.innerHTML=e[t].title,r.innerHTML='<i class="fa-regular fa-pen-to-square"></i>',s.innerHTML='<i class="fa-solid fa-trash"></i>',r.classList.add("edit-todo"),s.classList.add("delete-todo"),i.innerHTML=e[t].schedule,a.innerHTML="DETAILS",a.setAttribute("data-modal-target","#description-modal"),d.appendChild(c),l.appendChild(a),l.appendChild(i),l.appendChild(r),l.appendChild(s),d.appendChild(l),o.appendChild(d)}break}}function k(){const t=document.getElementById("update-todo-project");t.replaceChildren();for(let o=0;o<e.projectList.length;o++){const d=document.createElement("option"),n=e.projectList[o].title;d.textContent=n,t.appendChild(d)}}o.addEventListener("click",(()=>{const t=document.querySelector(o.dataset.modalTarget);t.querySelector("h2").textContent="New Task",T(t),function(){const t=document.getElementById("todo-project");t.replaceChildren();for(let o=0;o<e.projectList.length;o++){const d=document.createElement("option"),n=e.projectList[o].title;d.textContent=n,t.appendChild(d)}}()})),p.addEventListener("click",(e=>{e.preventDefault();const d=document.querySelector(o.dataset.modalTarget),n=document.getElementById("todo-title").value,c=document.getElementById("todo-description").value,l=document.getElementById("due-date").value,a=document.getElementById("todo-priority"),i=a.options[a.selectedIndex].text,r=document.getElementById("todo-project"),s=r.options[r.selectedIndex].text;t.addTodo(n,c,i,l,s),q(s),I(d)})),c.addEventListener("click",(()=>{const e=document.querySelector(c.dataset.modalTarget);document.querySelector(".modal-header").textContent="New Project",T(e)})),u.addEventListener("click",(t=>{t.preventDefault();const o=document.querySelector(c.dataset.modalTarget),d=document.getElementById("project-title").value;e.createProjects(d),v(),I(o)})),E.addEventListener("click",(o=>{o.preventDefault();const d=document.getElementById("update-project-title").value;e.updateProjects(j,d),console.log("HERE"),t.changeProjectsTodo(d),v(),k(),q(d),I(f)})),h.addEventListener("click",(e=>{e.preventDefault();const o=document.getElementById("update-todo-modal"),d=document.getElementById("update-todo-title").value,n=document.getElementById("update-todo-description").value,c=document.getElementById("update-due-date").value,l=document.getElementById("update-todo-priority"),a=l.options[l.selectedIndex].text,i=document.getElementById("update-todo-project"),r=i.options[i.selectedIndex].text;t.updateTodo(d,n,a,c,r,y,L),q(r),I(o)})),l.forEach((e=>{e.addEventListener("click",(()=>{I(e.closest(".modal"))}))})),a.addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((e=>{I(e)}))})),n.forEach((e=>{e.addEventListener("click",(()=>{d.innerHTML=e.textContent}))})),i.addEventListener("click",(function(e){const t=e.target.closest(".projects-sidebar").id.split("-");if(d.innerHTML=t[1].charAt(0).toUpperCase()+t[1].slice(1),q(t[1]),e.target.matches("i"))if("fa-regular fa-pen-to-square"===e.target.className){let t=e.target.closest(".edit-project").id.split("-");j=t[2],T(f)}else console.log("delete")})),C.addEventListener("click",(function(t){if(t.target.matches("i")){if("fa-regular fa-pen-to-square"===t.target.className){L=0;let o=t.target.closest(".edit-todo").id.split("-"),d=o[1],n=o[2];for(let t of e.projectList)if(t.title===n){const e=t.todo;L=0;for(let t of e){if(t.title===d){y=t;break}L++}break}t.preventDefault();const c=document.getElementById("update-todo-modal"),l=document.getElementById("update-todo-title"),a=document.getElementById("update-todo-description"),i=document.getElementById("update-due-date"),r=document.getElementById("update-todo-priority");l.value=y.title,a.value=y.description,i.value=y.schedule,r.value=y.priority.toLowerCase(),k(),T(c)}}else if(t.target.matches("input"))console.log("omg");else{const o=t.target.closest(".todo-details"),d=o.id.split("-"),n=document.querySelector(o.dataset.modalTarget);n.querySelector("h2").textContent=d[1].charAt(0).toUpperCase()+d[1].slice(1),function(t,o){const d=document.querySelector(".add-description-form-body");d.replaceChildren();for(let n of e.projectList)if(n.title===o){let e=n.todo;for(let o of e)if(o.title===t){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),c=document.createElement("div");e.classList.add("details-desc"),t.classList.add("details-desc"),n.classList.add("details-desc"),c.classList.add("details-desc");const l=document.createElement("span"),a=document.createElement("span"),i=document.createElement("span"),r=document.createElement("span");l.textContent="Project: ",a.textContent="Priority: ",i.textContent="Due Date: ",r.textContent="Description: ";const s=document.createElement("p"),u=document.createElement("p"),p=document.createElement("p"),m=document.createElement("p");s.textContent=o.projectTitle,u.textContent=o.priority,p.textContent=o.schedule,m.textContent=o.description,e.appendChild(l),e.appendChild(s),t.appendChild(a),t.appendChild(u),n.appendChild(i),n.appendChild(p),c.appendChild(r),c.appendChild(m),d.appendChild(e),d.appendChild(t),d.appendChild(n),d.appendChild(c);break}}}(d[1],d[2]),T(n)}}))}()})();